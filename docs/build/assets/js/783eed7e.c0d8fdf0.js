"use strict";(globalThis.webpackChunkimperium_docs=globalThis.webpackChunkimperium_docs||[]).push([[289],{8133(e,n,a){a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"guides/documentation-standards","title":"Padrao de Documentacao","description":"Guia para manter a documentacao consistente entre Swagger e Docusaurus.","source":"@site/docs/guides/documentation-standards.md","sourceDirName":"guides","slug":"/guides/documentation-standards","permalink":"/guides/documentation-standards","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Deployment","permalink":"/guides/deployment"},"next":{"title":"Visao Geral da Arquitetura","permalink":"/architecture/overview"}}');var o=a(4848),r=a(8453);const d={sidebar_position:3},t="Padrao de Documentacao",i={},c=[{value:"Regra de Ouro",id:"regra-de-ouro",level:2},{value:"1. Template Handler (Go + Swagger)",id:"1-template-handler-go--swagger",level:2},{value:"Exemplo Real",id:"exemplo-real",level:3},{value:"2. Template Model (Go)",id:"2-template-model-go",level:2},{value:"3. Template Docusaurus (Markdown)",id:"3-template-docusaurus-markdown",level:2},{value:"6. Tags Swagger Padrao",id:"6-tags-swagger-padrao",level:2},{value:"7. Codigos de Status HTTP",id:"7-codigos-de-status-http",level:2},{value:"8. Estrutura de Arquivos",id:"8-estrutura-de-arquivos",level:2},{value:"Exemplo Completo: Novo Modulo &quot;Goals&quot;",id:"exemplo-completo-novo-modulo-goals",level:2},{value:"1. Model (<code>internal/models/goal.go</code>)",id:"1-model-internalmodelsgoalgo",level:3},{value:"2. Handler (<code>internal/handlers/goals.go</code>)",id:"2-handler-internalhandlersgoalsgo",level:3},{value:"3. Docusaurus (<code>docs/api/endpoints.md</code>)",id:"3-docusaurus-docsapiendpointsmd",level:3}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"padrao-de-documentacao",children:"Padrao de Documentacao"})}),"\n",(0,o.jsxs)(n.p,{children:["Guia para manter a documentacao consistente entre ",(0,o.jsx)(n.strong,{children:"Swagger"})," e ",(0,o.jsx)(n.strong,{children:"Docusaurus"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"regra-de-ouro",children:"Regra de Ouro"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Toda funcao publica deve ter documentacao Swagger E uma entrada no Docusaurus."})}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"1-template-handler-go--swagger",children:"1. Template Handler (Go + Swagger)"}),"\n",(0,o.jsx)(n.p,{children:"Ao criar um novo handler, use este template:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'// NomeDoHandler godoc\n// @Summary Descricao curta (max 60 chars)\n// @Description Descricao detalhada do que o endpoint faz\n// @Tags nome-do-modulo\n// @Accept json\n// @Produce json\n// @Security BearerAuth\n// @Param id path string true "ID do recurso"\n// @Param request body models.NomeRequest true "Dados da requisicao"\n// @Success 200 {object} models.NomeResponse\n// @Success 201 {object} models.NomeResponse "Criado com sucesso"\n// @Failure 400 {string} string "Requisicao invalida"\n// @Failure 401 {string} string "Nao autorizado"\n// @Failure 404 {string} string "Nao encontrado"\n// @Failure 500 {string} string "Erro interno"\n// @Router /caminho/{id} [get]\nfunc NomeDoHandler(w http.ResponseWriter, r *http.Request) {\n    // implementacao\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"exemplo-real",children:"Exemplo Real"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'// CreateDebt godoc\n// @Summary Criar nova divida\n// @Description Registra uma nova divida com juros compostos\n// @Tags debts\n// @Accept json\n// @Produce json\n// @Security BearerAuth\n// @Param request body models.CreateDebtRequest true "Dados da divida"\n// @Success 201 {object} models.Debt\n// @Failure 400 {string} string "Dados invalidos"\n// @Failure 401 {string} string "Token invalido"\n// @Router /debts [post]\nfunc CreateDebt(w http.ResponseWriter, r *http.Request) {\n    userID := middleware.GetUserID(r)\n    // ...\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"2-template-model-go",children:"2. Template Model (Go)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'// NomeModel representa [descricao]\n// @Description Descricao do modelo para Swagger\ntype NomeModel struct {\n    ID          primitive.ObjectID `json:"id" bson:"_id,omitempty" example:"65abc123def456789"`\n    UserID      primitive.ObjectID `json:"user_id" bson:"user_id"`\n    Name        string             `json:"name" bson:"name" example:"Exemplo"`\n    Value       float64            `json:"value" bson:"value" example:"100.50"`\n    IsActive    bool               `json:"is_active" bson:"is_active" example:"true"`\n    CreatedAt   time.Time          `json:"created_at" bson:"created_at"`\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-template-docusaurus-markdown",children:"3. Template Docusaurus (Markdown)"}),"\n",(0,o.jsxs)(n.p,{children:["Para cada endpoint, adicione no arquivo ",(0,o.jsx)(n.code,{children:"/docs/api/endpoints.md"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:'### Nome do Endpoint\n\n<span className="api-method api-method--post">POST</span> `/caminho/do/endpoint`\n\nDescricao do que o endpoint faz.\n\n**Headers:**\n- `Authorization: Bearer <token>` (obrigatorio)\n\n**Request Body:**\n\n| Campo | Tipo | Obrigatorio | Descricao |\n|-------|------|-------------|-----------|\n| `name` | string | Sim | Nome do recurso |\n| `value` | number | Sim | Valor em reais |\n| `is_active` | boolean | Nao | Default: true |\n\n```json\n{\n  "name": "Exemplo",\n  "value": 100.50,\n  "is_active": true\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response:"})," ",(0,o.jsx)(n.code,{children:"201 Created"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "id": "65abc123def456789",\n  "name": "Exemplo",\n  "value": 100.50,\n  "is_active": true,\n  "created_at": "2024-01-20T10:30:00Z"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Erros:"})}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Status"}),(0,o.jsx)(n.th,{children:"Descricao"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"400"})}),(0,o.jsx)(n.td,{children:"Campos obrigatorios faltando"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"401"})}),(0,o.jsx)(n.td,{children:"Token invalido ou expirado"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"409"})}),(0,o.jsx)(n.td,{children:"Recurso ja existe"})]})]})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\n---\n\n## 4. Checklist Novo Endpoint\n\nAo criar um novo endpoint, verifique:\n\n- [ ] Handler tem comentarios Swagger (`// @Summary`, `// @Router`, etc)\n- [ ] Model tem tags `json`, `bson` e `example`\n- [ ] Request/Response structs documentadas\n- [ ] Endpoint adicionado em `/docs/api/endpoints.md`\n- [ ] Swagger regenerado: `swag init -g cmd/api/main.go -o docs`\n- [ ] Docusaurus buildando: `npm run build`\n\n---\n\n## 5. Comandos Uteis\n\n```bash\n# Regenerar Swagger apos mudancas\ncd backend\nswag init -g cmd/api/main.go -o docs\n\n# Verificar se Docusaurus compila\ncd docs\nnpm run build\n\n# Rodar ambos localmente\n# Terminal 1: Backend + Swagger\ncd backend && go run cmd/api/main.go\n\n# Terminal 2: Docusaurus\ncd docs && npm start\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-tags-swagger-padrao",children:"6. Tags Swagger Padrao"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Tag"}),(0,o.jsx)(n.th,{children:"Uso"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"auth"})}),(0,o.jsx)(n.td,{children:"Autenticacao (login, register, me)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"profile"})}),(0,o.jsx)(n.td,{children:"Perfil do usuario"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"transactions"})}),(0,o.jsx)(n.td,{children:"Transacoes financeiras"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"accounts"})}),(0,o.jsx)(n.td,{children:"Contas bancarias conectadas"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"debts"})}),(0,o.jsx)(n.td,{children:"Dividas e emprestimos"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"schedules"})}),(0,o.jsx)(n.td,{children:"Agendamentos"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"stats"})}),(0,o.jsx)(n.td,{children:"Estatisticas e graficos"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"7-codigos-de-status-http",children:"7. Codigos de Status HTTP"}),"\n",(0,o.jsx)(n.p,{children:"Use consistentemente:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Codigo"}),(0,o.jsx)(n.th,{children:"Quando Usar"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"200 OK"})}),(0,o.jsx)(n.td,{children:"GET, PUT, PATCH com sucesso"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"201 Created"})}),(0,o.jsx)(n.td,{children:"POST criou recurso"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"204 No Content"})}),(0,o.jsx)(n.td,{children:"DELETE com sucesso"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"400 Bad Request"})}),(0,o.jsx)(n.td,{children:"Dados invalidos"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"401 Unauthorized"})}),(0,o.jsx)(n.td,{children:"Token ausente/invalido"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"403 Forbidden"})}),(0,o.jsx)(n.td,{children:"Sem permissao"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"404 Not Found"})}),(0,o.jsx)(n.td,{children:"Recurso nao existe"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"409 Conflict"})}),(0,o.jsx)(n.td,{children:"Duplicado (ex: email ja existe)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"500 Internal Server Error"})}),(0,o.jsx)(n.td,{children:"Erro no servidor"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"8-estrutura-de-arquivos",children:"8. Estrutura de Arquivos"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"backend/\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 handlers/\n\u2502   \u2502   \u2514\u2500\u2500 novo_handler.go    # Com comentarios Swagger\n\u2502   \u2514\u2500\u2500 models/\n\u2502       \u2514\u2500\u2500 novo_model.go      # Com tags example\n\u2514\u2500\u2500 docs/\n    \u251c\u2500\u2500 docs.go                # Gerado automaticamente\n    \u251c\u2500\u2500 swagger.json           # Gerado automaticamente\n    \u2514\u2500\u2500 swagger.yaml           # Gerado automaticamente\n\ndocs/                          # Docusaurus\n\u2514\u2500\u2500 docs/\n    \u2514\u2500\u2500 api/\n        \u2514\u2500\u2500 endpoints.md       # Atualizar manualmente\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"exemplo-completo-novo-modulo-goals",children:'Exemplo Completo: Novo Modulo "Goals"'}),"\n",(0,o.jsxs)(n.h3,{id:"1-model-internalmodelsgoalgo",children:["1. Model (",(0,o.jsx)(n.code,{children:"internal/models/goal.go"}),")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package models\n\nimport (\n    "time"\n    "go.mongodb.org/mongo-driver/bson/primitive"\n)\n\n// Goal representa uma meta financeira\ntype Goal struct {\n    ID           primitive.ObjectID `json:"id" bson:"_id,omitempty" example:"65abc123def456789"`\n    UserID       primitive.ObjectID `json:"user_id" bson:"user_id"`\n    Name         string             `json:"name" bson:"name" example:"Viagem para Europa"`\n    TargetAmount float64            `json:"target_amount" bson:"target_amount" example:"15000"`\n    CurrentAmount float64           `json:"current_amount" bson:"current_amount" example:"5000"`\n    Deadline     time.Time          `json:"deadline" bson:"deadline"`\n    CreatedAt    time.Time          `json:"created_at" bson:"created_at"`\n}\n\n// CreateGoalRequest para criar nova meta\ntype CreateGoalRequest struct {\n    Name         string    `json:"name" example:"Viagem para Europa"`\n    TargetAmount float64   `json:"target_amount" example:"15000"`\n    Deadline     time.Time `json:"deadline"`\n}\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"2-handler-internalhandlersgoalsgo",children:["2. Handler (",(0,o.jsx)(n.code,{children:"internal/handlers/goals.go"}),")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'package handlers\n\n// CreateGoal godoc\n// @Summary Criar meta financeira\n// @Description Cria uma nova meta de economia\n// @Tags goals\n// @Accept json\n// @Produce json\n// @Security BearerAuth\n// @Param request body models.CreateGoalRequest true "Dados da meta"\n// @Success 201 {object} models.Goal\n// @Failure 400 {string} string "Dados invalidos"\n// @Failure 401 {string} string "Nao autorizado"\n// @Router /goals [post]\nfunc CreateGoal(w http.ResponseWriter, r *http.Request) {\n    // implementacao\n}\n\n// GetGoals godoc\n// @Summary Listar metas\n// @Description Retorna todas as metas do usuario\n// @Tags goals\n// @Produce json\n// @Security BearerAuth\n// @Success 200 {array} models.Goal\n// @Router /goals [get]\nfunc GetGoals(w http.ResponseWriter, r *http.Request) {\n    // implementacao\n}\n'})}),"\n",(0,o.jsxs)(n.h3,{id:"3-docusaurus-docsapiendpointsmd",children:["3. Docusaurus (",(0,o.jsx)(n.code,{children:"docs/api/endpoints.md"}),")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-markdown",children:'## Metas Financeiras\n\n### Criar Meta\n\n<span className="api-method api-method--post">POST</span> `/goals`\n\nCria uma nova meta de economia.\n\n**Request:**\n\n```json\n{\n  "name": "Viagem para Europa",\n  "target_amount": 15000,\n  "deadline": "2024-12-31T00:00:00Z"\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Response:"})," ",(0,o.jsx)(n.code,{children:"201 Created"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "id": "65abc123def456789",\n  "name": "Viagem para Europa",\n  "target_amount": 15000,\n  "current_amount": 0,\n  "deadline": "2024-12-31T00:00:00Z",\n  "created_at": "2024-01-20T10:30:00Z"\n}\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\n### 4. Regenerar Docs\n\n```bash\n# Swagger\ncd backend && swag init -g cmd/api/main.go -o docs\n\n# Testar Docusaurus\ncd ../docs && npm run build\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,n,a){a.d(n,{R:()=>d,x:()=>t});var s=a(6540);const o={},r=s.createContext(o);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);