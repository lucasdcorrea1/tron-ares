"use strict";(globalThis.webpackChunkimperium_docs=globalThis.webpackChunkimperium_docs||[]).push([[104],{1025(e,n,o){o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"guides/setup","title":"Setup do Ambiente","description":"Guia completo para configurar o ambiente de desenvolvimento do Imperium Backend.","source":"@site/docs/guides/setup.md","sourceDirName":"guides","slug":"/guides/setup","permalink":"/guides/setup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Autenticacao","permalink":"/api/authentication"},"next":{"title":"Deployment","permalink":"/guides/deployment"}}');var r=o(4848),a=o(8453);const i={sidebar_position:1},d="Setup do Ambiente",c={},l=[{value:"Pre-requisitos",id:"pre-requisitos",level:2},{value:"Instalacao Rapida (Docker)",id:"instalacao-rapida-docker",level:2},{value:"Instalacao Manual (Desenvolvimento)",id:"instalacao-manual-desenvolvimento",level:2},{value:"1. Instalar Go",id:"1-instalar-go",level:3},{value:"2. Instalar MongoDB",id:"2-instalar-mongodb",level:3},{value:"3. Configurar Variaveis de Ambiente",id:"3-configurar-variaveis-de-ambiente",level:3},{value:"4. Instalar Dependencias",id:"4-instalar-dependencias",level:3},{value:"5. Gerar Documentacao Swagger",id:"5-gerar-documentacao-swagger",level:3},{value:"6. Executar",id:"6-executar",level:3},{value:"Estrutura do Projeto",id:"estrutura-do-projeto",level:2},{value:"Comandos Uteis",id:"comandos-uteis",level:2},{value:"Docker Compose",id:"docker-compose",level:2},{value:"Servicos Disponiveis",id:"servicos-disponiveis",level:3},{value:"Comandos Docker",id:"comandos-docker",level:3},{value:"Verificacao",id:"verificacao",level:2},{value:"Problemas Comuns",id:"problemas-comuns",level:2},{value:"Porta ja em uso",id:"porta-ja-em-uso",level:3},{value:"MongoDB nao conecta",id:"mongodb-nao-conecta",level:3},{value:"Erro de permissao no Docker",id:"erro-de-permissao-no-docker",level:3}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"setup-do-ambiente",children:"Setup do Ambiente"})}),"\n",(0,r.jsx)(n.p,{children:"Guia completo para configurar o ambiente de desenvolvimento do Imperium Backend."}),"\n",(0,r.jsx)(n.h2,{id:"pre-requisitos",children:"Pre-requisitos"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Ferramenta"}),(0,r.jsx)(n.th,{children:"Versao"}),(0,r.jsx)(n.th,{children:"Descricao"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Go"})}),(0,r.jsx)(n.td,{children:"1.24+"}),(0,r.jsx)(n.td,{children:"Linguagem principal"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Docker"})}),(0,r.jsx)(n.td,{children:"20.10+"}),(0,r.jsx)(n.td,{children:"Containerizacao"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Docker Compose"})}),(0,r.jsx)(n.td,{children:"2.0+"}),(0,r.jsx)(n.td,{children:"Orquestracao"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Git"})}),(0,r.jsx)(n.td,{children:"2.0+"}),(0,r.jsx)(n.td,{children:"Controle de versao"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"instalacao-rapida-docker",children:"Instalacao Rapida (Docker)"}),"\n",(0,r.jsx)(n.p,{children:"A forma mais rapida de rodar o projeto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clone o repositorio\ngit clone <repo-url>\ncd Imperium-App/backend\n\n# Copie o arquivo de ambiente\ncp .env.example .env\n\n# Inicie todos os servicos\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.p,{children:"Pronto! Acesse:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API:"})," ",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Swagger:"})," ",(0,r.jsx)(n.a,{href:"http://localhost:8080/swagger/",children:"http://localhost:8080/swagger/"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MongoDB Express:"})," ",(0,r.jsx)(n.a,{href:"http://localhost:8081",children:"http://localhost:8081"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Grafana:"})," ",(0,r.jsx)(n.a,{href:"http://localhost:3001",children:"http://localhost:3001"})," (admin/imperium123)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prometheus:"})," ",(0,r.jsx)(n.a,{href:"http://localhost:9091",children:"http://localhost:9091"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"instalacao-manual-desenvolvimento",children:"Instalacao Manual (Desenvolvimento)"}),"\n",(0,r.jsx)(n.h3,{id:"1-instalar-go",children:"1. Instalar Go"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install go\n\n# Linux\nwget https://go.dev/dl/go1.24.linux-amd64.tar.gz\nsudo tar -C /usr/local -xzf go1.24.linux-amd64.tar.gz\nexport PATH=$PATH:/usr/local/bin\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-instalar-mongodb",children:"2. Instalar MongoDB"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Via Docker (recomendado)\ndocker run -d --name mongo -p 27017:27017 mongo:7\n\n# macOS\nbrew tap mongodb/brew\nbrew install mongodb-community\n\n# Linux\n# Siga: https://docs.mongodb.com/manual/installation/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-configurar-variaveis-de-ambiente",children:"3. Configurar Variaveis de Ambiente"}),"\n",(0,r.jsxs)(n.p,{children:["Crie o arquivo ",(0,r.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env\nMONGO_URI=mongodb://localhost:27017/imperium\nPORT=8080\nJWT_SECRET=sua-chave-secreta-aqui-mude-em-producao\nJWT_EXPIRY=168h\nDB_NAME=imperium\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-instalar-dependencias",children:"4. Instalar Dependencias"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd backend\ngo mod download\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-gerar-documentacao-swagger",children:"5. Gerar Documentacao Swagger"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Instalar swag CLI\ngo install github.com/swaggo/swag/cmd/swag@latest\n\n# Gerar docs\nswag init -g cmd/api/main.go -o docs\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6-executar",children:"6. Executar"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"go run cmd/api/main.go\n"})}),"\n",(0,r.jsx)(n.h2,{id:"estrutura-do-projeto",children:"Estrutura do Projeto"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"backend/\n\u251c\u2500\u2500 cmd/\n\u2502   \u2514\u2500\u2500 api/\n\u2502       \u2514\u2500\u2500 main.go          # Ponto de entrada\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 config/              # Configuracoes\n\u2502   \u251c\u2500\u2500 database/            # Conexao MongoDB\n\u2502   \u251c\u2500\u2500 handlers/            # Controllers HTTP\n\u2502   \u251c\u2500\u2500 middleware/          # Middlewares\n\u2502   \u251c\u2500\u2500 models/              # Estruturas de dados\n\u2502   \u2514\u2500\u2500 router/              # Rotas\n\u251c\u2500\u2500 docs/                    # Swagger gerado\n\u251c\u2500\u2500 monitoring/              # Configs Prometheus/Grafana\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 go.mod\n\u2514\u2500\u2500 go.sum\n"})}),"\n",(0,r.jsx)(n.h2,{id:"comandos-uteis",children:"Comandos Uteis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Executar em desenvolvimento\ngo run cmd/api/main.go\n\n# Build\ngo build -o main cmd/api/main.go\n\n# Testes\ngo test ./...\n\n# Lint\ngolangci-lint run\n\n# Atualizar Swagger\nswag init -g cmd/api/main.go -o docs\n"})}),"\n",(0,r.jsx)(n.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,r.jsx)(n.h3,{id:"servicos-disponiveis",children:"Servicos Disponiveis"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Servico"}),(0,r.jsx)(n.th,{children:"Porta"}),(0,r.jsx)(n.th,{children:"Descricao"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"api"})}),(0,r.jsx)(n.td,{children:"8080"}),(0,r.jsx)(n.td,{children:"Backend Go"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mongo"})}),(0,r.jsx)(n.td,{children:"27017"}),(0,r.jsx)(n.td,{children:"MongoDB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"mongo-express"})}),(0,r.jsx)(n.td,{children:"8081"}),(0,r.jsx)(n.td,{children:"UI do MongoDB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"prometheus"})}),(0,r.jsx)(n.td,{children:"9091"}),(0,r.jsx)(n.td,{children:"Metricas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"grafana"})}),(0,r.jsx)(n.td,{children:"3001"}),(0,r.jsx)(n.td,{children:"Dashboards"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"loki"})}),(0,r.jsx)(n.td,{children:"3100"}),(0,r.jsx)(n.td,{children:"Logs"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"promtail"})}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Coletor de logs"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"comandos-docker",children:"Comandos Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Iniciar todos\ndocker-compose up -d\n\n# Iniciar apenas API e MongoDB\ndocker-compose up -d api mongo\n\n# Ver logs\ndocker-compose logs -f api\n\n# Rebuild apos mudancas\ndocker-compose up -d --build api\n\n# Parar tudo\ndocker-compose down\n\n# Parar e limpar volumes\ndocker-compose down -v\n"})}),"\n",(0,r.jsx)(n.h2,{id:"verificacao",children:"Verificacao"}),"\n",(0,r.jsx)(n.p,{children:"Teste se tudo esta funcionando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Health check\ncurl http://localhost:8080/api/v1/health\n# {"status":"ok"}\n\n# Registrar usuario\ncurl -X POST http://localhost:8080/api/v1/auth/register \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email":"test@test.com","password":"123456","name":"Test"}\'\n'})}),"\n",(0,r.jsx)(n.h2,{id:"problemas-comuns",children:"Problemas Comuns"}),"\n",(0,r.jsx)(n.h3,{id:"porta-ja-em-uso",children:"Porta ja em uso"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Encontrar processo\nlsof -i :8080\n\n# Matar processo\nkill -9 <PID>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"mongodb-nao-conecta",children:"MongoDB nao conecta"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verificar se esta rodando\ndocker ps | grep mongo\n\n# Verificar logs\ndocker logs mongo\n"})}),"\n",(0,r.jsx)(n.h3,{id:"erro-de-permissao-no-docker",children:"Erro de permissao no Docker"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Adicionar usuario ao grupo docker\nsudo usermod -aG docker $USER\n# Fazer logout e login novamente\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453(e,n,o){o.d(n,{R:()=>i,x:()=>d});var s=o(6540);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);